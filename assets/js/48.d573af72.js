(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{232:function(t,e,a){"use strict";a.r(e);var p=a(0),v=Object(p.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"http的缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http的缺点","aria-hidden":"true"}},[t._v("#")]),t._v(" http的缺点")]),t._v(" "),a("p",[t._v("1、通信使用明文，内容可能会被窃听。\n应对方法：\n通信加密，通过SSL或TLS的组合使用加密HTTP的通信内容即HTTPS。\n内容加密，客户端与服务端的报文采用加密和解密机制来进行通信。\n2、不验证通信方的身份，因此有可能遭遇到请求伪装。\n应对方法：使用证书来证明服务器和客户端是实际存在可信任的。\n3、无法证明把报文的完整性，可能已经被篡改。\n应对方法：用MD5或SHA-1等哈希值校验的方法来确认文件的正确性。即在本地生成的MD5值和服务器传输的MD5值进行对比。但是这种方法也存在问题，因为MD5值在传输过程中也可能被篡改。")]),t._v(" "),a("h3",{attrs:{id:"http-加密-认证-完整性保护-https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-加密-认证-完整性保护-https","aria-hidden":"true"}},[t._v("#")]),t._v(" HTTP + 加密 + 认证 + 完整性保护 = HTTPS")]),t._v(" "),a("p",[t._v("HTTPS 并非是应用层的一种新协议。只是HTTP通信接口部分用SSL和TLS带替而已。通常Http和TCP通信。当使用SSL时就演变为和HTTP先和SSL通信，再和TCP通信。")]),t._v(" "),a("h4",{attrs:{id:"相互交换密钥的加密技术"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相互交换密钥的加密技术","aria-hidden":"true"}},[t._v("#")]),t._v(" 相互交换密钥的加密技术")]),t._v(" "),a("p",[t._v("1、共享加密（对称性加密）")]),t._v(" "),a("p",[t._v("加密和解密用的是同一种密钥的方式成为共享密钥加密，也被叫做对称密钥加密。其过程就是在发送加密内容的时候把钥匙也发送过去，对方收到这个加密的内容用这个密钥进行解密。但是这样就出现一个问题，当钥匙被攻击者获取后，加密也就是去了意义。")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://p2w3pqeze.bkt.clouddn.com//TuJieHttp/7-1.png",alt:"image"}})]),t._v(" "),a("p",[t._v("2、公开密钥加密（非对称性加密）\n公开密钥加密方式很好地解决了共享密钥加密的困难。\n公开密钥加密使用一对非对称的密钥。一把叫做私有密钥(private key ),另一把叫做公开密钥(public key)。私有密钥是个人私有的，公开密钥可以向任何人公开。其过程就是A向B发送信息时，用B的公钥进行加密，B收到信息后就可以用B自己的私钥进行解密。因为只有个人的私钥才能解密，所以这个安全性会大幅度地提升。")]),t._v(" "),a("p",[t._v("实例图：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://p2w3pqeze.bkt.clouddn.com//TuJieHttp/7-2.png",alt:"image"}})]),t._v(" "),a("p",[t._v("3、 混合加密机制\nHTTPS 采用共享密钥加密和公开密钥加密两者并用的混合加密机\n制。因为公开密钥加密安全性高但速度慢，而共享密钥安全性低但速度快，所以应充分利用2者各自的优势，\n在交换密钥环节使用公开密钥加密方式，之后的建立通信交换报文阶段则使用共享密钥加密方式。")]),t._v(" "),a("p",[t._v("实例图：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://p2w3pqeze.bkt.clouddn.com//TuJieHttp/7-3.png",alt:"image"}})]),t._v(" "),a("h4",{attrs:{id:"证明公钥正确性的证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#证明公钥正确性的证书","aria-hidden":"true"}},[t._v("#")]),t._v(" 证明公钥正确性的证书")]),t._v(" "),a("p",[t._v("虽然公钥加密的安全性高，但是还是会存在漏洞，因为公钥在传输的过程中可能会被劫持、替换。因此需要证明公钥的正确性。可以使用由数字证书认证机构和其相关机关颁发的公开密钥证书来证明公钥的正确性。")]),t._v(" "),a("p",[t._v("证书申请业务流程：\n首先，服务器的运营人员向数字证书认证机构提出公开密钥的申请。数字证书认证机构在判明提出申请者的身份之后，会对已申请的公开密钥做数字签名，然后分配这个已签名的公开密钥，并将该公开密钥放人公钥证书后绑定在一起。\n之后服务器在和客户端进行通信时，会将得到的公钥证书发送给客户端，客户端可使用数字证书认证机构的公开密钥,对那张证书上的数字签名进行验证。")]),t._v(" "),a("p",[t._v("一旦验证通过，客户端便可明确两件事:\n一、认证服务器的公开密钥的是真实有效的数字证书认证机构。\n二、服务器的公开密钥是值得信赖的。")]),t._v(" "),a("p",[t._v("实例图："),a("img",{attrs:{src:"http://p2w3pqeze.bkt.clouddn.com//TuJieHttp/7-4.png",alt:"image"}})]),t._v(" "),a("h4",{attrs:{id:"https的安全通信机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https的安全通信机制","aria-hidden":"true"}},[t._v("#")]),t._v(" HTTPS的安全通信机制")]),t._v(" "),a("p",[t._v("步骤图："),a("img",{attrs:{src:"http://p2w3pqeze.bkt.clouddn.com//TuJieHttp/7-5.png",alt:"image"}})]),t._v(" "),a("p",[t._v("步骤1:\n客户端通过发送Client Hello报文开始SSL 通信。报文中包含客户端支持的SSL的指定版本、加密组件(Cipher Suite) 列表(所使用的加密算法及密钥长度等)。")]),t._v(" "),a("p",[t._v("步骤2:\n服务器可进行SSL 通信时，会以Server Hello 报文作为应答。和客户端一样，在报文中包含SSL版本以及加密组件。服务器的加密组件内容是从接收到的客户端加密组件\n内筛选出来的。")]),t._v(" "),a("p",[t._v("步骤3:\n之后服务器发送Certificate报文。报文中包含公开密钥证书。")]),t._v(" "),a("p",[t._v("步骤4:\n最后服务器发送ServerHelloDone报文通知客户端，最初阶段的SSL 握手协商部分结束。")]),t._v(" "),a("p",[t._v("步骤5:\nSSL 第一次握手结東之后，客户端以Client Key Exchange\n报文作为回应。报文中包含通信加密中使用的一种被称为Pre-master secret 的随机密码串。该报文已用步骤3中的公开密钥进行加密。")]),t._v(" "),a("p",[t._v("步骤6:\n接着客户端继续发送ChangeCipherSpec报文。该报文会提示服务器,在此报文之后的通信会采用Pre-mastersecret密钥加密。")]),t._v(" "),a("p",[t._v("步骤7:\n客户端发送Finished报文。该报文包含连接至今全部报文的整体校验值。这次握手协商是否能够成功，要以服务器是否能够正确解密该报文作为判定标准。")]),t._v(" "),a("p",[t._v("步骤8:\n服务器同样发送ChangeCipherSpec报文。")]),t._v(" "),a("p",[t._v("步骤9:\n服务器同样发送Finished报文。")]),t._v(" "),a("p",[t._v("步骤10:\n服务器和客户端的Finished 报文交换完毕之后,SSL 连接就算建立完成。当然，通信会受到SSL 的保护。从此处开始进行应用层协议的通信，即发送HTTP 请求。")]),t._v(" "),a("p",[t._v("步骤11: 应用层协议通信，即发送HTTP响应。")]),t._v(" "),a("p",[t._v("步骤12: 最后由客户端断开连接。断开连接时，发送close.notify报文，这步之后再发送TCP FIN 报文来关闭与TCP的通信。")]),t._v(" "),a("h4",{attrs:{id:"为什么不一直使用https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么不一直使用https","aria-hidden":"true"}},[t._v("#")]),t._v(" 为什么不一直使用HTTPS")]),t._v(" "),a("p",[t._v("1、速度慢、耗性能\n因为与纯文本通信相比，加密通信会消耗更多的CPU及内存资源，导致处理速度变慢。\n2、成本")]),t._v(" "),a("p",[t._v("HTTPS通信需要安全证书，购买证书需要花费一定的成本。")]),t._v(" "),a("p",[t._v("因此综上所诉，只有传输敏感的信息时才使用HTTPS,保证其安全性。而对非敏感的信息用HTTP传输，节约成本。")])])},[],!1,null,null,null);e.default=v.exports}}]);